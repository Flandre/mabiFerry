# 轮渡时刻表系统

这是一个基于Web的轮渡时刻表预测工具，用于预测游戏中的船只到达和出发时间。

## 功能特性

### 基础功能
- **智能数据输入**：直接输入游戏中观察到的实际数据，系统自动计算基础时间和线路偏移
- **实时时刻表**：显示所有港口的ETD（预计离港时间）和ETA（预计到达时间）
- **船只状态追踪**：显示船只当前状态（等候/检票中）和剩余时间
- **多线路支持**：支持10条游戏线路，自动计算不同线路的时间偏移

### 数据管理功能
- **自动保存**：输入数据和计算结果自动保存到浏览器本地存储
- **数据导出**：将所有数据导出为JSON文件进行备份
- **数据导入**：从JSON文件导入之前保存的数据
- **数据清除**：清除所有保存的数据
- **重置默认**：恢复为系统默认的示例数据

### 航线支持
- 塞拉港口 ⇄ 凯安港口
- 肯努斯港口 ⇄ 凯安港口  
- 卡普港口 ⇄ 克拉港口
- 卡普港口 ⇄ 贝尔法斯特

## 使用方法

### 1. 数据输入
#### 塞拉-凯安线路数据（用于计算伊利亚基础时间）
1. 选择船只状态：等船(1) 或 等出发(2)
2. 输入当前观察时间（格式：2025-02-18T15:35:03）
3. 输入游戏显示的时间（格式：1:09，表示1分09秒）
4. 系统会自动计算基础时间和各线路偏移

#### 卡普-贝尔法斯特数据（用于计算贝尔法斯特基础时间）
1. 输入线路10的观察数据
2. 格式与塞拉-凯安数据相同

### 2. 数据管理

#### 自动保存
- 每次修改输入数据时，系统会自动保存到浏览器的localStorage
- 页面刷新后会自动恢复之前输入的数据
- 包括输入的原始数据、计算结果和当前选择的线路

#### 导出数据
1. 点击"导出数据"按钮
2. 系统会生成一个JSON文件并自动下载
3. 文件名格式：`ferry_timetable_data_2025-02-18T15-35-03.json`
4. 包含完整的输入数据、计算结果和时间戳

#### 导入数据
1. 点击"导入数据"按钮
2. 选择之前导出的JSON文件
3. 系统会验证文件格式并恢复所有数据
4. 导入成功后会自动重新计算时刻表

#### 清除数据
1. 点击"清除数据"按钮
2. 确认后会删除所有保存的数据
3. 自动重置为默认示例数据

#### 重置默认
1. 点击"重置默认"按钮
2. 恢复为系统内置的示例数据
3. 适用于首次使用或测试功能

### 3. 查看时刻表
1. 在"当前查看线路"中选择要查看的线路（1-10）
2. 右侧会显示该线路的完整时刻表
3. 包括所有港口的船只时间和状态
4. 每秒自动更新，显示实时状态

## 数据格式说明

### JSON文件结构
```json
{
  "iriaData": [
    {
      "line": 1,
      "status": "2",
      "currentTime": "2025-02-18T15:35:03",
      "displayTime": "1:09"
    }
  ],
  "belvastData": [
    {
      "status": "1", 
      "currentTime": "2025-02-18T15:38:27",
      "displayTime": "0:47"
    }
  ],
  "currentChannel": "9",
  "calculatedResults": {
    "iriaBaseTime": "2022-08-04T01:42:27",
    "belvastBaseTime": "2022-08-04T03:07:35",
    "channelOffset": [-300, -70, -25, -10, -55, 0, -21, -10, 0, 0]
  },
  "timestamp": "2025-02-18T15:35:03.000Z",
  "version": "1.0"
}
```

### 字段说明
- **iriaData**: 塞拉-凯安线路的观察数据
- **belvastData**: 卡普-贝尔法斯特线路的观察数据
- **currentChannel**: 当前查看的线路（0-9对应线路1-10）
- **calculatedResults**: 计算得出的基础时间和偏移数据
- **timestamp**: 数据保存时间
- **version**: 数据格式版本

## 技术实现

### 前端技术
- **HTML5**: 响应式页面结构
- **CSS3**: 现代化样式设计，支持移动端
- **JavaScript**: 原生JS实现，无框架依赖

### 数据存储
- **localStorage**: 浏览器本地持久化存储
- **JSON格式**: 标准化数据交换格式
- **文件导出/导入**: 支持数据备份和迁移

### 特性
- **实时更新**: 每秒刷新时刻表数据
- **自动计算**: 基于实际观察数据自动推算时间
- **智能保存**: 输入变化时自动保存
- **错误处理**: 完善的异常处理和用户提示

## 浏览器支持

- Chrome 60+
- Firefox 55+
- Safari 10+
- Edge 79+

## 使用注意事项

1. **数据准确性**：请确保输入的观察数据准确，包括时间格式和状态选择
2. **网络连接**：系统为纯前端应用，无需网络连接即可正常使用
3. **数据备份**：建议定期导出数据进行备份，避免意外丢失
4. **浏览器设置**：确保浏览器允许使用localStorage功能
5. **时间同步**：建议与游戏时间保持同步以获得最准确的预测

## 更新日志

### v1.0.0 (2025-02-18)
- 基础时刻表功能
- 智能数据输入和计算
- 左右分栏布局优化
- localStorage自动保存
- 数据导出/导入功能
- 完整的数据管理功能

## 反馈与支持

如有问题或建议，请通过以下方式联系：
- 功能建议：提供详细的需求描述
- 错误报告：包含复现步骤和错误信息
- 数据问题：提供具体的输入数据和期望结果 
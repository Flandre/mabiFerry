# 轮渡时刻表预测系统

一个基于实时观察数据的游戏轮渡时刻表预测工具，专为洛奇（Mabinogi）游戏设计。

## 🚀 新版本特性

### 动态基础时间计算
- **完全基于观察数据**：不再依赖任何预设的固定时间
- **自动适应维护**：每次游戏维护后，只需重新输入观察数据即可自动校准
- **实时准确预测**：基于您的实际观察数据计算出最准确的时刻表

### 智能数据管理
- **自动保存**：输入数据自动保存到本地存储
- **数据导出/导入**：支持JSON格式的数据备份和恢复
- **一键校准**：长期运行后可手动重新校准时间基准

## 📋 使用方法

### 基础设置
1. **观察塞拉港口→凯安港口线路**
   - 在游戏中前往塞拉港口
   - 观察1-10线轮渡的状态和剩余时间
   - 记录观察时的准确时间

2. **输入观察数据**
   - 状态：选择"等船"或"等出发"
   - 当前时间：输入观察时的准确时间
   - 显示时间：输入游戏中显示的剩余时间（格式：分:秒）

3. **贝尔法斯特数据**（可选）
   - 观察卡普港口→贝尔法斯特的10线数据
   - 输入方式同上

### 数据要求
- **最少需要1条伊利亚数据**即可开始预测
- **多条数据**可提高准确性并计算频道偏移
- **贝尔法斯特数据**用于贝尔法斯特相关航线

## 🎯 功能特点

### 实时时刻表
- **6条主要航线**的完整时刻表
- **实时状态显示**：等候/检票中
- **准确倒计时**：精确到秒的剩余时间
- **频道偏移**：显示不同频道的时间差异

### 支持的航线
1. 塞拉港口 ↔ 凯安港口
2. 肯努斯港口 ↔ 凯安港口  
3. 卡普港口 ↔ 克拉港口
4. 卡普港口 ↔ 贝尔法斯特

### 数据管理
- **导出数据**：备份您的观察数据
- **导入数据**：恢复之前的设置
- **清除数据**：重置所有保存的数据
- **重置默认**：恢复示例数据
- **重新校准**：基于当前数据重新计算基础时间

## 🔧 技术原理

### 时间计算逻辑
```
基础时间 = 观察到的到港时间 - 等待到港时间间隔
频道偏移 = 各频道到港时间差异
预测时间 = 基础时间 + 循环次数 × 循环间隔 + 频道偏移
```

### 状态判断
- **状态1（等船）**：当前时间 + 显示时间 = 到港时间
- **状态2（等出发）**：当前时间 - (总等待时间 - 剩余时间) = 到港时间

### 循环机制
- **伊利亚航线**：11分钟循环（5分钟等候 + 6分钟检票）
- **贝尔法斯特航线**：6分钟循环（2.5分钟等候 + 3.5分钟检票）

## 💡 使用技巧

### 获取准确数据
1. **选择合适时机**：在船只状态刚切换时观察最准确
2. **多频道观察**：观察不同频道可计算偏移差异
3. **定期更新**：游戏维护后及时更新观察数据

### 数据维护
1. **定期校准**：长期使用后可点击"重新校准时间"
2. **备份数据**：重要数据及时导出备份
3. **验证准确性**：对比实际游戏时间验证预测准确性

## 📱 界面设计

### 左右分栏布局
- **左侧控制面板**：数据输入、设置、管理功能
- **右侧时刻表**：实时显示所有航线信息
- **响应式设计**：自适应不同屏幕尺寸

### 直观显示
- **颜色编码**：不同状态用不同颜色区分
- **实时更新**：每秒自动刷新时刻表
- **频道切换**：点击频道偏移可快速切换基准

## 🔄 版本更新

### v2.0 主要改进
- ✅ 移除固定基础时间依赖
- ✅ 基于观察数据动态计算
- ✅ 智能处理游戏维护重置
- ✅ 增强数据管理功能
- ✅ 优化用户界面和体验

### v1.0 基础功能
- ✅ 基础时刻表预测
- ✅ 频道偏移计算
- ✅ 数据保存功能
- ✅ 响应式界面设计

## 🎮 游戏兼容性

- **游戏版本**：洛奇（Mabinogi）
- **服务器**：支持所有服务器
- **平台**：Web浏览器（Chrome、Firefox、Safari、Edge）
- **设备**：PC、平板、手机均可使用

## 📞 技术支持

如果您在使用过程中遇到问题或有改进建议，请：
1. 检查输入数据格式是否正确
2. 确认观察时间和游戏时间一致
3. 尝试重新校准基础时间
4. 查看浏览器控制台的调试信息

---

**注意**：本工具仅供游戏辅助使用，请遵守游戏相关规定。预测结果基于观察数据计算，可能存在误差，请以游戏实际情况为准。 